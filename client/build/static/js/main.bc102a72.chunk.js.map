{"version":3,"sources":["apiCalls.js","context/AuthReducer.js","context/AuthContext.js","pages/login/Login.jsx","components/topbar/Topbar.jsx","components/rightbar/Rightbar.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/conversations/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","App.js","index.js"],"names":["loginCall","userCredential","dispatch","a","type","axios","post","res","console","log","data","payload","logoutCall","err","AuthReducer","state","action","user","isFetching","error","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","useEffect","setItem","stringify","Provider","value","Login","email","useRef","password","useContext","history","useHistory","handleClick1","e","preventDefault","push","className","onSubmit","current","style","height","placeholder","required","ref","minLength","disabled","CircularProgress","color","size","onClick","Topbar","useState","newMessage","setNewMessage","to","textDecoration","Search","onChange","target","username","Rightbar","PF","process","friends","setFriends","currentUser","includes","_id","followed","setFollowed","get","friendList","getFriends","handleClick","put","userId","senderId","receiverId","ProfileRightbar","Remove","Add","city","desc","relationship","map","friend","src","profilePicture","alt","Profile","setUser","useParams","fetchUser","coverPicture","Register","passwordAgain","setCustomValidity","Conversation","conversation","friendId","members","find","m","getUser","Message","message","own","text","format","createdAt","ChatOnline","onlineUsers","currentId","setCurrentChat","onlineFriends","setOnlineFriends","f","o","Messenger","conversations","setConversations","currentChat","messages","setMessages","arrivalMessage","setArrivalMessage","setOnlineUsers","socket","scrollRef","io","on","sender","Date","now","prev","emit","users","some","u","getConversations","getMessages","handleSubmit","conversationId","member","scrollIntoView","behavior","c","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bc102a72.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const loginCall = async (userCredential, dispatch) => {\n  dispatch({ type: \"LOGIN_START\" });\n  try {\n    const res = await axios.post(\"/auth/login\", userCredential);\n    console.log(res.data);\n    dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n  } catch (err) {\n    dispatch({ type: \"LOGIN_FAILURE\", payload: err });\n  }\n};\n\n\nexport const logoutCall = async (dispatch) => {\n  try {\n    dispatch({ type: \"LOGOUT_SUCCESS\"});\n  } catch (err) {\n    dispatch({ type: \"LOGOUT_FAILURE\", payload: err });\n  }\n};\n\n","const AuthReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      };\n    case \"LOGIN_SUCCESS\":\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      };\n    case \"LOGIN_FAILURE\":\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      };\n    case \"FOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      };\n    case \"UNFOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      };\n      case \"LOGOUT_SUCCESS\":\n      return {\n        user: null,\n        isFetching: false,\n        error: false,\n      };\n      case \"LOGOUT_FAILURE\":\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default AuthReducer;\n","import { createContext, useEffect, useReducer } from \"react\";\nimport AuthReducer from \"./AuthReducer\";\n\nconst INITIAL_STATE = {\n  user:JSON.parse(localStorage.getItem(\"user\")) || null,\n  isFetching: false,\n  error: false,\n};\n\n\nexport const AuthContext = createContext(INITIAL_STATE);\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n  \n  useEffect(()=>{\n    localStorage.setItem(\"user\", JSON.stringify(state.user))\n  },[state.user])\n  \n  return (\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import { useContext, useRef } from \"react\";\n// import \"./login.css\";\nimport { loginCall } from \"../../apiCalls\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { useHistory } from \"react-router\";\n\nexport default function Login() {\n  const email = useRef();\n  const password = useRef();\n  const { isFetching, dispatch } = useContext(AuthContext);\n  const history = useHistory();\n\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    loginCall(\n      { email: email.current.value, password: password.current.value },\n      dispatch\n    );\n  };\n\n  const handleClick1 = async (e) => {\n    e.preventDefault();\n    try {\n      history.push(\"/register\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"loginWrapper\">\n        <div className=\"loginLeft\">\n          <h3 className=\"loginLogo\">chatApp</h3>\n          <span className=\"loginDesc\">\n            Connect with friends and the world around you on chatApp.\n          </span>\n        </div>\n        <div className=\"loginRight\">\n          <form className=\"loginBox\" onSubmit={handleClick}  style={{height: \"300px\"}}>\n            <input\n              placeholder=\"Email\"\n              type=\"email\"\n              required\n              className=\"loginInput\"\n              ref={email}\n            />\n            <input\n              placeholder=\"Password\"\n              type=\"password\"\n              required\n              minLength=\"6\"\n              className=\"loginInput\"\n              ref={password}\n            />\n            <button className=\"loginButton\" type=\"submit\" disabled={isFetching}>\n              {isFetching ? (\n                <CircularProgress color=\"primary\" size=\"20px\" />\n              ) : (\n                \"Log In\"\n              )}\n            </button>\n            {/* <span className=\"loginForgot\">Forgot Password?</span> */}\n            <button className=\"loginRegisterButton\" onClick={handleClick1} >\n              {isFetching ? (\n                <CircularProgress color=\"primary\" size=\"20px\" />\n              ) : (\n                \"Create a New Account\"\n              )}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./topbar.css\";\nimport { Search, Person, Chat, Notifications } from \"@material-ui/icons\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { logoutCall } from \"../../apiCalls\";\nimport { useHistory } from \"react-router\";\nimport { useContext, useRef, useState } from \"react\";\n\nexport default function Topbar() {\n  const { user } = useContext(AuthContext);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const { dispatch } = useContext(AuthContext);\n  const history = useHistory();\n  const [newMessage, setNewMessage] = useState(\"\");\n\n  const handleClick = (e) => {\n    console.log(\"HJJJJ\")\n    e.preventDefault();\n    logoutCall(\n      dispatch\n    );\n    history.push(\"/login\");\n  };\n\n  const handleClick1 = (e) => {\n    e.preventDefault();\n    try{\n      history.push(`/profile/${newMessage}`);\n    }catch (err) {\n      console.log(err);\n    }\n  };\n\n \n\n\n  return (\n    <div className=\"topbarContainer\">\n      <div className=\"topbarLeft\">\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\n          <span className=\"logo\">chatApp</span>\n        </Link>\n      </div>\n      <div className=\"topbarCenter\">\n        <div className=\"searchbar\">\n          <form onSubmit={handleClick1}>\n            <Search className=\"searchIcon\" />\n            <input\n              placeholder=\"Search for People\"\n              className=\"searchInput\"\n              onChange={(e) => setNewMessage(e.target.value)}\n              value={newMessage}\n            />\n          </form>\n          \n        </div>\n      </div>\n      <div className=\"topbarRight\">\n        <div className=\"topbarLinks\">\n          <Link to={`/`}>\n              <span className=\"topbarLink\">Messenger</span>\n           </Link>\n           <Link to={`/profile/${user.username}`}>\n            <span className=\"topbarLink\">Profile</span>\n           </Link>\n          \n        </div>\n        {/* <div className=\"topbarIcons\">\n          <div className=\"topbarIconItem\">\n            <Person />\n            <span className=\"topbarIconBadge\">1</span>\n          </div>\n          <div className=\"topbarIconItem\">\n            <Chat />\n            <span className=\"topbarIconBadge\">2</span>\n          </div>\n          <div className=\"topbarIconItem\">\n            <Notifications />\n            <span className=\"topbarIconBadge\">1</span>\n          </div>\n        </div> */}\n        {/* <Link to={`/profile/${user.username}`}> */}\n          {/* <button> */}\n            {/* <img\n              src={\n                user.profilePicture\n                  ? PF + user.profilePicture\n                  : PF + \"person/noAvatar.png\"\n              }\n              alt=\"\"\n              className=\"topbarImg\"\n              onClick={handleClick}\n            /> */}\n             <span onClick={handleClick} className=\"topbarLogout\">\n               Logout\n             </span>\n          {/* </button> */}\n          \n        {/* </Link> */}\n      </div>\n    </div>\n  );\n}\n","import \"./rightbar.css\";\n// import { Users } from \"../../dummyData\";\n// import Online from \"../online/Online\";\nimport { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport { Add, Remove} from \"@material-ui/icons\";\n\nexport default function Rightbar({ user }) {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [friends, setFriends] = useState([]);\n  const { user: currentUser, dispatch } = useContext(AuthContext);\n  const [followed, setFollowed] = useState(\n    currentUser.followings.includes(user._id)\n  );\n\n  useEffect(() => {\n    // console.log(currentUser.followings.includes(user._id));\n    setFollowed(currentUser.followings.includes(user?._id));\n    const getFriends = async () => {\n      try {\n        // console.log(user);\n        const friendList = await axios.get(\"/users/friends/\" + user._id);\n        setFriends(friendList.data);\n      \n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getFriends();\n  }, [user,currentUser]);\n\n  const handleClick = async () => {\n    try {\n      // console.log(followed,currentUser,user._id,\"HI\");\n      if (followed) {\n        await axios.put(`/users/${user._id}/unfollow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"UNFOLLOW\", payload: user._id });\n      } else {\n        await axios.put(`/users/${user._id}/follow`, {\n          userId: currentUser._id,\n        });\n        dispatch({ type: \"FOLLOW\", payload: user._id });\n\n        const res = await axios.get(`/conversations/find/${user._id}/${currentUser._id}`,{});\n        console.log(res,\"HELOOO\");\n        if(res.data == null){\n          await axios.post(`/conversations/`,{\n            senderId: currentUser._id,\n            receiverId: user._id,\n          });\n        }\n        \n      }\n      setFollowed(!followed);\n    } catch (err) {\n    }\n  };\n\n  // const HomeRightbar = () => {\n  //   return (\n  //     <>\n  //       <div className=\"birthdayContainer\">\n  //         <img className=\"birthdayImg\" src=\"assets/gift.png\" alt=\"\" />\n  //         <span className=\"birthdayText\">\n  //           <b>Pola Foster</b> and <b>3 other friends</b> have a birhday today.\n  //         </span>\n  //       </div>\n  //       <img className=\"rightbarAd\" src=\"assets/ad.png\" alt=\"\" />\n  //       <h4 className=\"rightbarTitle\">Online Friends</h4>\n  //       <ul className=\"rightbarFriendList\">\n  //         {Users.map((u) => (\n  //           <Online key={u.id} user={u} />\n  //         ))}\n  //       </ul>\n  //     </>\n  //   );\n  // };\n\n  const ProfileRightbar = () => {\n    return (\n      <>\n        {user.username !== currentUser.username && (\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\n            {followed ? \"Unfollow\" : \"Follow\"}\n            {followed ? <Remove /> : <Add />}\n          </button>\n        )}\n        <h4 className=\"rightbarTitle\">User information</h4>\n        <div className=\"rightbarInfo\">\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">City:</span>\n            <span className=\"rightbarInfoValue\">{user.city}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Desc:</span>\n            <span className=\"rightbarInfoValue\">{user.desc}</span>\n          </div>\n          <div className=\"rightbarInfoItem\">\n            <span className=\"rightbarInfoKey\">Relationship:</span>\n            <span className=\"rightbarInfoValue\">\n              {user.relationship !== \"\"\n                ? user.relationship\n                : \"Not Indicated\"}\n            </span>\n          </div>\n        </div>\n        <h4 className=\"rightbarTitle\">User friends</h4>\n        <div className=\"rightbarFollowings\">\n          {friends.map((friend) => (\n            <Link\n              to={\"/profile/\" + friend.username}\n              style={{ textDecoration: \"none\" }}\n              className=\"linkspace\"\n            >\n              <div className=\"rightbarFollowing\">\n                <img\n                  src={\n                    friend.profilePicture\n                      ? PF + friend.profilePicture\n                      : PF + \"person/noAvatar.png\"\n                  }\n                  alt=\"\"\n                  className=\"rightbarFollowingImg\"\n                />\n                <span className=\"rightbarFollowingName\">{friend.username}</span>\n              </div>\n            </Link>\n          ))}\n        </div>\n      </>\n    );\n  };\n  return (\n    <div className=\"rightbar\">\n      <div className=\"rightbarWrapper\">\n        <ProfileRightbar /> \n      </div>\n    </div>\n  );\n}\n","import \"./profile.css\";\nimport Topbar from \"../../components/topbar/Topbar\";\n// import Sidebar from \"../../components/sidebar/Sidebar\";\n// import Feed from \"../../components/feed/Feed\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router\";\n\nexport default function Profile() {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n  const [user, setUser] = useState({});\n  const username = useParams().username;\n\n  useEffect(() => {\n    // console.log(username);\n    const fetchUser = async () => {\n      const res = await axios.get(`/users?username=${username}`);\n      // console.log(\"HI\");\n      setUser(res.data);\n    };\n    fetchUser();\n  }, [username]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"profile\">\n        {/* <Sidebar /> */}\n        <div className=\"profileRight\">\n          <div className=\"profileRightTop\">\n            <div className=\"profileCover\">\n              <img\n                className=\"profileCoverImg\"\n                src={\n                  user.coverPicture\n                    ? PF + user.coverPicture\n                    : PF + \"person/noCover.jpeg\"\n                }\n                alt=\"\"\n              />\n              <img\n                className=\"profileUserImg\"\n                src={\n                  user.profilePicture\n                    ? PF + user.profilePicture\n                    : PF + \"person/noAvatar.png\"\n                }\n                alt=\"\"\n              />\n            </div>\n            <div className=\"profileInfo\">\n              <h4 className=\"profileInfoName\">{user.username}</h4>\n              <span className=\"profileInfoDesc\">{user.desc}</span>\n            </div>\n          </div>\n          <div className=\"profileRightBottom\">\n            {/* <Feed username={username} /> */}\n            <Rightbar user={user} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import axios from \"axios\";\nimport { useRef } from \"react\";\nimport \"./register.css\";\nimport { useHistory } from \"react-router\";\n\nexport default function Register() {\n  const username = useRef();\n  const email = useRef();\n  const password = useRef();\n  const passwordAgain = useRef();\n  const city = useRef();\n  const relationship = useRef();\n  const desc = useRef();\n  const history = useHistory();\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    if (passwordAgain.current.value !== password.current.value) {\n      passwordAgain.current.setCustomValidity(\"Passwords don't match!\");\n    } else {\n      const user = {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n        city:city.current.value,\n        relationship:relationship.current.value,\n        desc:desc.current.value,\n\n      };\n      try {\n        await axios.post(\"/auth/register\", user);\n        history.push(\"/login\");\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  const handleClick1 = async (e) => {\n    e.preventDefault();\n    try {\n      history.push(\"/login\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"loginWrapper\">\n        <div className=\"loginLeft\">\n          <h3 className=\"loginLogo\">chatApp</h3>\n          <span className=\"loginDesc\">\n            Connect with friends and the world around you on chatApp.\n          </span>\n        </div>\n        <div className=\"loginRight\">\n          <form className=\"loginBox\" onSubmit={handleClick}>\n            <input\n              placeholder=\"Username\"\n              required\n              ref={username}\n              className=\"loginInput\"\n            />\n            <input\n              placeholder=\"City\"\n              required\n              ref={city}\n              className=\"loginInput\"\n            />\n             <input\n              placeholder=\"Relationship Status\"\n              ref={relationship}\n              className=\"loginInput\"\n            />\n             <textarea\n              placeholder=\"Description\"\n              ref={desc}\n              className=\"loginInput\"\n            ></textarea>\n            <input\n              placeholder=\"Email\"\n              required\n              ref={email}\n              className=\"loginInput\"\n              type=\"email\"\n            />\n            <input\n              placeholder=\"Password\"\n              required\n              ref={password}\n              className=\"loginInput\"\n              type=\"password\"\n              minLength=\"6\"\n            />\n            <input\n              placeholder=\"Password Again\"\n              required\n              ref={passwordAgain}\n              className=\"loginInput\"\n              type=\"password\"\n            />\n            <button className=\"loginButton\" type=\"submit\">\n              Sign Up\n            </button>\n            <button className=\"loginRegisterButton\" onClick={handleClick1}>Log into Account</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport \"./conversation.css\";\n\nexport default function Conversation({ conversation, currentUser }) {\n  const [user, setUser] = useState(null);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\n  useEffect(() => {\n    const friendId = conversation.members.find((m) => m !== currentUser._id);\n\n    const getUser = async () => {\n      try {\n        const res = await axios(\"/users?userId=\" + friendId);\n        setUser(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getUser();\n  }, [currentUser, conversation]);\n\n  return (\n    <div className=\"conversation\">\n      <img\n        className=\"conversationImg\"\n        src={\n          user?.profilePicture\n            ? PF + user.profilePicture\n            : PF + \"person/noAvatar.png\"\n        }\n        alt=\"\"\n      />\n      <span className=\"conversationName\">{user?.username}</span>\n    </div>\n  );\n}\n","import \"./message.css\";\nimport { format } from \"timeago.js\";\n\nexport default function Message({ message, own }) {\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\n  return (\n    <div className={own ? \"message own\" : \"message\"}>\n      <div className=\"messageTop\">\n        <img\n          className=\"messageImg\"\n          src={PF + \"person/noAvatar.png\"}\n          alt=\"\"\n        />\n        <p className=\"messageText\">{message.text}</p>\n      </div>\n      <div className=\"messageBottom\">{format(message.createdAt)}</div>\n    </div>\n  );\n}\n","import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport \"./chatOnline.css\";\n\nexport default function ChatOnline({ onlineUsers, currentId, setCurrentChat }) {\n  const [friends, setFriends] = useState([]);\n  const [onlineFriends, setOnlineFriends] = useState([]);\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\n  useEffect(() => {\n    const getFriends = async () => {\n      const res = await axios.get(\"/users/friends/\" + currentId);\n      setFriends(res.data);\n    };\n\n    getFriends();\n  }, [currentId]);\n\n  useEffect(() => {\n    setOnlineFriends(friends.filter((f) => onlineUsers.includes(f._id)));\n  }, [friends, onlineUsers]);\n\n  const handleClick = async (user) => {\n    try {\n      const res = await axios.get(\n        `/conversations/find/${currentId}/${user._id}`\n      );\n      setCurrentChat(res.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <div className=\"chatOnline\">\n      {onlineFriends.map((o) => (\n        <div className=\"chatOnlineFriend\" onClick={() => handleClick(o)} key={o._id}>\n          <div className=\"chatOnlineImgContainer\">\n            <img\n              className=\"chatOnlineImg\"\n              src={\n                o?.profilePicture\n                  ? PF + o.profilePicture\n                  : PF + \"person/noAvatar.png\"\n              }\n              alt=\"\"\n            />\n            <div className=\"chatOnlineBadge\"></div>\n          </div>\n          <span className=\"chatOnlineName\">{o?.username}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import \"./messenger.css\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Conversation from \"../../components/conversations/Conversation\";\nimport Message from \"../../components/message/Message\";\nimport ChatOnline from \"../../components/chatOnline/ChatOnline\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nimport { io } from \"socket.io-client\";\n\nexport default function Messenger() {\n  const [conversations, setConversations] = useState([]);\n  const [currentChat, setCurrentChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [arrivalMessage, setArrivalMessage] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const socket = useRef();\n  const { user } = useContext(AuthContext);\n  const scrollRef = useRef();\n\n  useEffect(() => {\n    socket.current = io(\"ws://localhost:8800\");\n    socket.current.on(\"getMessage\", (data) => {\n      setArrivalMessage({\n        sender: data.senderId,\n        text: data.text,\n        createdAt: Date.now(),\n      });\n    });\n  }, []);\n\n  useEffect(() => {\n    arrivalMessage &&\n      currentChat?.members.includes(arrivalMessage.sender) &&\n      setMessages((prev) => [...prev, arrivalMessage]);\n  }, [arrivalMessage, currentChat]);\n\n  useEffect(() => {\n    socket.current.emit(\"addUser\", user._id);\n    socket.current.on(\"getUsers\", (users) => {\n      setOnlineUsers(\n        user.followings.filter((f) => users.some((u) => u.userId === f))\n      );\n    });\n  }, [user]);\n\n  useEffect(() => {\n    const getConversations = async () => {\n      try {\n        const res = await axios.get(\"/conversations/\" + user._id);\n        setConversations(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getConversations();\n  }, [user._id]);\n\n  useEffect(() => {\n    const getMessages = async () => {\n      try {\n        const res = await axios.get(\"/messages/\" + currentChat?._id);\n        setMessages(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getMessages();\n  }, [currentChat]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const message = {\n      sender: user._id,\n      text: newMessage,\n      conversationId: currentChat._id,\n    };\n\n    const receiverId = currentChat.members.find(\n      (member) => member !== user._id\n    );\n\n    socket.current.emit(\"sendMessage\", {\n      senderId: user._id,\n      receiverId,\n      text: newMessage,\n    });\n\n    try {\n      const res = await axios.post(\"/messages\", message);\n      setMessages([...messages, res.data]);\n      setNewMessage(\"\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"messenger\">\n        <div className=\"chatMenu\">\n          <div className=\"chatMenuWrapper\">\n            <input placeholder=\"Search for friends\" className=\"chatMenuInput\" />\n            {conversations.map((c) => (\n              <div onClick={() => setCurrentChat(c)}>\n                <Conversation conversation={c} currentUser={user} key = {c._id} />\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"chatBox\">\n          <div className=\"chatBoxWrapper\">\n            {currentChat ? (\n              <>\n                <div className=\"chatBoxTop\">\n                  {messages.map((m) => (\n                    <div ref={scrollRef}>\n                      <Message message={m} own={m.sender === user._id} key = {m._id}/>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"chatBoxBottom\">\n                  <textarea\n                    className=\"chatMessageInput\"\n                    placeholder=\"write something...\"\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    value={newMessage}\n                  ></textarea>\n                  <button className=\"chatSubmitButton\" onClick={handleSubmit}>\n                    Send\n                  </button>\n                </div>\n              </>\n            ) : (\n              <span className=\"noConversationText\">\n                No Conversation has Been opened.\n              </span>\n            )}\n          </div>\n        </div>\n        <div className=\"chatOnline\">\n          <div className=\"chatOnlineWrapper\">\n            <ChatOnline\n              onlineUsers={onlineUsers}\n              currentId={user._id}\n              setCurrentChat={setCurrentChat}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","// import Home from \"./pages/home/Home\";\nimport Login from \"./pages/login/Login\";\nimport Profile from \"./pages/profile/Profile\";\nimport Register from \"./pages/register/Register\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport Messenger from \"./pages/messenger/Messenger\";\n\nfunction App() {\n  const { user } = useContext(AuthContext);\n  return (\n    <Router>\n      <Switch>\n        <Route exact path=\"/\">\n          {user ? <Messenger /> : <Register />}\n        </Route>\n        <Route path=\"/login\">{user ? <Redirect to=\"/\" /> : <Login />}</Route>\n        <Route path=\"/register\">\n          {user ? <Redirect to=\"/\" /> : <Register />}\n        </Route>\n        {/* <Route path=\"/messenger\">\n          {!user ? <Redirect to=\"/\" /> : <Messenger />}\n        </Route> */}\n        <Route path=\"/profile/:username\">\n          <Profile />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}